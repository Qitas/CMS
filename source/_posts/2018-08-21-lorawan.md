---
title: LoRaWAN
---

LoRaWAN 将终端设备划分成A/B/C三类 Class A：终端双向通信 A类的终端设备每次发送数据后会打开两个持续时间很短的接收窗口来接收下行数据，终端设备通过这种方式实现双向通信。传输时间间隔等于终端设备基础的时间间隔加上一个随机时间（ALOHA类型协议）。

对终端设备来说，A类是功耗最低的系统，只有在发送数据后的一小段时间内接收处理服务器发送来的数据。服务器在其它所有时间上的下行数据必须等待节点下一次发送数据才可以下发。 

Class B：具有接收时隙的终端双向通信 B类终端设备允许更多的接收窗口。在A类接收窗口的基础上B类设备还会在特定的时刻打开更多的接收窗口。而为了保证终端设备能够在特定的时间打开接收窗口，它会从网关接收信标来完成时间同步。这样服务器也就可以获知终端设备的所有接收窗口的时刻。 

Class C：最大接收时隙的终端双向通信 C类终端设备的接收窗口，除了在发送数据的时候关闭外一直处于打开状态。C类终端功耗比A类和B类都大，但对于和服务器之间的交互来说延迟也最低。

PS:高级类的附加功能向下兼容低级类，所有LoRaWAN终端必须实现A类的功能。 链路分类上行链路消息由终端发送经过一个或多个网关中转后到达服务器。它使用的LoRa无线分组显性模式由物理头（PHDR）和它的CRC（PHDR\_CRC）校验组成。由CRC保证荷载数据的一致性（发送和接收的数据完全一致，不仅仅是数据完整）。 

下行链路消息由服务器发送给终端设备，每条消息对应的终端设备是唯一确定的，而且只通过一个网关2转发。 下行链路消息由物理头（PHDR）和这个头的CRC（PHDR\_CRC）组成3。 LoRaWAN入网 空中激活OTAA：需要准备 DevEUI，AppEUI，AppKey 三个参数，即设备自身MAC地址和应用ID和密钥。 

ABP激活：直接配置 DevAddr，NwkSKey，AppSKey 这三个LoRaWAN最终通讯的参数，不再需要join流程。在这种情况下，这个设备是可以直接发应用数据的。 

商用的LoRaWAN网络一般都是走OTAA流程，这样安全性才得以保证，如CLAA标准，需要CLAA组织分配相应参数。