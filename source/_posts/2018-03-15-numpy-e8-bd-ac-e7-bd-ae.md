---
title: numpy转置
url: 1256.html
id: 1256
categories:
  - IT·Q
tags:
  - numpy
  - python
---

numpy是多维数组操作的根本，所谓的tensor即是数组的概念，对于多维数组来说，维度是确定最底层的一个元素位置需要用到的索引个数，因为是多维，所以具有坐标轴axis(对应前面的索引)及针对axis的计算，在numpy中对数据进行转置有三种方式：T、transpose、swapaxes。 T转置，线性代数里经常出现的，适合二维数组的维度交换（低于二维也没有交换的概念了），由于numpy的实现机制是基于类的，所以使用方式如下： arr = np.arange(20).reshape(4,5) arr.T transpose()的操作对象一般是高维矩阵，transpose的操作比较依赖于shape参数，需要注意的是对于三维数组，表示为perm=\[0,1,2\]，其中的0代表三维数组的高(即为二维数组的个数)，1代表二维数组的行，2代表二维数组的列，实际对应的shape(z, x, y)，而不是想当然的shape(x, y, z)，不然下面理解起来很麻烦。 对于三维数组调用transpose(0,1,2)数组矩阵不发生变化，如果不输入参数直接调用transpose()，就是默认参数等于transpose(2,1,0)。 若对三维数组arr的z轴与x轴进行变换，arr.transpose((1, 0, 2))，同理交换x轴与y轴为 arr.transpose((0, 2, 1))，转换后数字的shape是(1, 0, 2)。 对于初次接触的人可能会迷惑arr.transpose((1,0,2))为何是两层括号？官方描述ndarray.transpose(\*axes)，参数为\*axes对应轴索引，所以引入一个元组（1,0,2），这个元组代表数组的索引组。 swapaxes，轴对称变换，把矩阵中某两个轴对换一下，接受一对轴编号参数，使用形式如：arr.swapaxes(1,3)。 对于如何确认和理解，我有个笨办法：通过对最底层元素的索引进行追踪，变换前后的对应位置索引发生相对应的改变，比如transpose(1,0,2)交换了0和1的位置，也就是将元素索引\[x\]\[y\]\[z\]变为\[y\]\[x\]\[z\]，慢慢就可以体会到其中的道理了。