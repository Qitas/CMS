---
title: ESP-IDF编译
url: 1090.html
id: 1090
categories:
  - IT·Q
tags:
  - 编程
---

ESP32，现象级的WIFI+蓝牙双模芯片，开发环境 ESP32-IDF git clone --recursive https://github.com/espressif/esp-idf.git git clone必须添加--recursive，否则无法拉取components目录下的全部模块。 在/etc/profile中添加IDF\_PATH路径，然后运行add\_path.sh 试着编译示例工程，进入目录下的/examples/get-started/hello\_world，通过 make menuconfig  编译时会出现错误 make\[1\]: Entering directory '/home/qi/ESP/tools/kconfig' cc -DCURSES\_LOC="" -DLOCALE -MD -c -o mconf.o mconf.c In file included from mconf.c:23:0: lxdialog/dialog.h:38:20: fatal error: curses.h: 没有那个文件或目录 compilation terminated. : recipe for target 'mconf.o' failed make\[1\]: *** \[mconf.o\] Error 1 make\[1\]: Leaving directory '/home/qi/ESP/tools/kconfig' 上述问题的解决办法：apt install libncurses5-dev 然后继续： make\[1\]: Entering directory '/home/qi/ESP/tools/kconfig' cc -D\_GNU\_SOURCE -DCURSES_LOC="" -DLOCALE -MD -c -o mconf.o mconf.c flex -L -P zconf -o zconf.lex.c zconf.l make\[1\]: flex：命令未找到 Makefile:320: recipe for target 'zconf.lex.c' failed makefile报上述错误原因：linux下面如iconv，mv等执行结果的，如果是没有错误的会返回0表示正常，而在windows下面的工具，其返回1表示执行结果正常，所以导致了makefile收到1，从而recipe for target ** failed的错误。 在makefile对应命令前面加上一个减号，表示makefile执行该命令时候，即使该命令出错，也可以忽略该命令的错误，可以继续执行余下的其他命令，使得makefile能继续正常执行。 此问题我成功解决办法（有点无理）：将根目录以小写命名，重新source一下，复制工程到上层根文件夹下 cp -r $IDF\_PATH/examples/get-started/hello\_world . Linux下如果需要串口烧录，先查看连接的串口：ls /dev/tty* ESP8266编译器安装 sudo apt-get remove libtool 然后至ftp://ftp.gnu.org/gnu/libtool/下载libtool-1.5.26版编译安装 git clone -b lx106 git://github.com/jcmvbkbc/crosstool-NG.git (通过git clone -b 只克隆lx106分支，该分支总共有30425个文件) ./bootstrap && ./configure --prefix=\`pwd\` && make && make install make时提示错误： In file included from zconf.tab.c:212:0: zconf.hash.c:167:1: error: conflicting types for ‘kconf\_id\_lookup’ kconf\_id\_lookup (register const char \*str, register size\_t len) ^~~~~~~~~~~~~~~ zconf.hash.c:34:31: note: previous declaration of ‘kconf\_id\_lookup’ was here static const struct kconf\_id \*kconf\_id\_lookup(register const char \*str, register unsigned int len); 在./kconf/zconf.hash.c这个文件里‘kconf\_id\_lookup’这个函数声明是static const struct kconf\_id \*kconf\_id\_lookup(register const char \*str, register unsigned int len);和定义const struct kconf\_id \*kconf\_id\_lookup (register const char *str, register size\_t len)。把size\_t len改成了unsigned int正常。 git clone --recursive https://github.com/pfalcon/esp-open-sdk make STANDALONE=y |& tee make0.log 参考链接： https://blog.csdn.net/flyingcys/article/details/71357261 https://blog.csdn.net/woshidahuaidan2011/article/details/51344312