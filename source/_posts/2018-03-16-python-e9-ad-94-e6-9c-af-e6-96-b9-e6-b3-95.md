---
title: python魔术方法
url: 1267.html
id: 1267
categories:
  - I·TQ
tags:
  - python
---

魔术方法，被用于重载python中的操作符和内置方法，通过前后加__定义，避免命名重复。常见的包括\_\_init\_\_、\_\_eq\_\_、\_\_new\_\_、\_\_str\_\_等。 魔术方法提供各种内置方法可预见的一致性，通过定义的魔术方法响应相应的操作，灵活丰富，提升了代码可读性。 其中有一个常见的if \_\_name\_\_ == '\_\_main\_\_'比较有收藏价值。 对于很多编程语言都必须要有一个main函数作为入口，而Python属于脚本语言，是动态的逐行解释运行，也就是从那都可以进入，没有了统一的入口。那么问题就来了，如何让一个Python源码在作为主程序时和在作为被引用程序时，分情况区别执行，可以提高代码的重复利用率，这就可以通过\_\_name\_\_的值来区分。 通过if \_\_name\_\_ == '\_\_main\_\_'可以模拟main函数入口，其原理是：\_\_name\_\_可以反映一个模块在包中的层次，如果一个模块被直接运行，则其没有包结构和包含关系，\_\_name\_\_值等于\_\_main\_\_。