---
title: python装饰器
url: 1084.html
id: 1084
categories:
  - I·TQ
tags:
  - python
---

在一个既定的调用函数外，可以通过装饰器再封装一层执行代码，在函数执行前后进行处理。装饰器可以使模块化非常清晰，同时装饰器是显式的，让代码具有很高的可读性。 装饰器接受可调用函数并返回可调用函数，装饰器也算是一个函数，接受被装饰的函数(在python中作为一级对象可传递)作为位置参数，常用于函数前置条件确认，函数运行后清理。装饰过的函数最好不要和未装饰的函数赋相同的名称。 通过@装饰的函数创建后立刻应用该装饰器，使用@应用多个装饰器按照从下向上顺序应用。装饰器可以返回自己提供的新的可调用函数替代被装饰的函数。 标准库中有@classmethod和@staticmethod这类装饰器，单元测试的mock模块允许使用@mock.patch或@mock.patch.object作为装饰器。web框架django使用@login_required作为装饰器处理登录权限。 编辑一个装饰器可以通过def func(decorated):来实现，然后通过@func来调用。装饰器除了被装饰者作为隐式参数，还可以携带自己的参数，如@func(in=2)，其实是将内部带有装饰器定义的函数func的返回值提供给@，通常根据@后是否有()判断直接应用还是应用结果。 由于类本身也是可调用函数，所以装饰器可以装饰类，可以用于将一个函数替换为一个类。糟糕的装饰器让被装饰对象模糊，会给调试带来麻烦的。